{contentType text}
<frame id="confirm-dialog" pos="-40 9" z-index="10000" hidden="1">
    <quad size="80 18" bgcolor="{config('colors.ui.window.bg.color')}" opacity="0.9" z-index="-1" />
    <quad size="80 2" bgcolor="{config('colors.ui.window.header.color')}" opacity="0.9" z-index="0" />
    <label pos="40 -6" size="76" valign="center" halign="center" text="" textsize="1" z-index="1" />

    <label class="confirm" pos="32 -13" z-index="0" size="15 5" text="YES" ScriptEvents="1" focusareacolor1="07E20099" halign="center" valign="center" textsize="0.5" focusareacolor2="06BD00AA" scriptevents="1"/>
    <label class="cancel" pos="48 -13" z-index="0" size="15 5" text="NO" ScriptEvents="1" focusareacolor1="f009" halign="center" valign="center" textsize="0.5" focusareacolor2="BD0000AA" scriptevents="1"/>
</frame>

<script><!--
    Boolean confirm(Text question){
        declare confirmDialogFrame <=> (Page.MainFrame.GetFirstChild("confirm-dialog") as CMlFrame);
        declare Boolean answer = False;
        declare Boolean decided = False;

        //show confirm dialog
        confirmDialogFrame.Show();

        //Set question text
        (confirmDialogFrame.Controls[2] as CMlLabel).SetText(question);

        while(!decided){
            yield;

            foreach(event in PendingEvents){
                if(event.Type == CMlScriptEvent::Type::MouseClick && event.Control.HasClass("confirm")){
                    answer = True;
                    decided = True;
                }
                if(event.Type == CMlScriptEvent::Type::MouseClick && event.Control.HasClass("cancel")){
                    decided = True;
                }
            }
        }

        //hide confirm dialog
        confirmDialogFrame.Hide();

        return answer;
    }
--></script>