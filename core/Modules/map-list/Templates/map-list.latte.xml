<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<manialink id="MapList" version="3">
<frame pos="0 0" scale="0.85" id="main-frame">
    <quad pos="-100 50" z-index="-3" size="200 110" bgcolor="0006"/>
    <quad pos="-100 37" z-index="0" size="200 0.2" bgcolor="18f9"/>
    <quad pos="-100 50" z-index="-2" size="200 13.5" bgcolor="18f3"/>
    <quad pos="-100 50" z-index="-1" size="200 110" style="Bgs1" substyle="BgDialogBlur"/>

    <frame pos="-95 45">
        <quad pos="135 -13" z-index="0" size="0.2 80" bgcolor="18f9"/>
        <label pos="0 0" z-index="0" size="20 5" text="$oMaps" textcolor="ffff" halign="left"/>
        <quad pos="185 1" z-index="0" size="6 6" bgcolor="FFFA" style="Icons128x32_1" substyle="Close" action="maplist.close"/>

        <label pos="0 -12" z-index="0" size="79 5" text="Name"/>
        <label pos="65 -12" z-index="0" size="40 5" text="Author"/>
        <label pos="105 -12" z-index="0" size="40 5" text="Local"/>
        <label pos="125 -12" z-index="0" size="40 5" text="Dedi"/>

        <label pos="140 -12" z-index="0" size="20 5" text="Next"/>

        {if isset($maps)}
        {foreach $maps as $map}
        <label pos="0 -{15 + $iterator->counter * 5}" z-index="0" size="62 5" textsize="1.8" valign="center" text="{stripStyle($map->Name ?: '')}"/>
        <label pos="65 -{15 + $iterator->counter * 5}" z-index="0" size="28 5" textsize="1.8" valign="center" text="{stripStyle(stripColors($map->author->NickName ?: $map->Author ?: ''))}"/>
        <label pos="105 -{15 + $iterator->counter * 5}" z-index="0" size="28 5" textsize="1.8" valign="center" text="{$map->locals()->whereLogin($player->Login)->Score ?: '-'}"/>
        <label pos="125 -{15 + $iterator->counter * 5}" z-index="0" size="28 5" textsize="1.8" valign="center" text="{$map->dedis()->whereLogin($player->Login)->Score ?: '-'}"/>

        <label pos="-1 -{15 + $iterator->counter * 5}" z-index="0" size="64 4.8" textsize="1.8" valign="center" textcolor="18fa" action="maplist.queue,{$map->id}"/>
        <label pos="64 -{15 + $iterator->counter * 5}" z-index="0" size="30 4.8" textsize="1.8" valign="center" textcolor="18fa" action="maplist.filter.author,{$map->Author}"/>
        {/foreach}
        {/if}

        {if count($queuedMaps)}
        {foreach $queuedMaps as $mapQueueItem}
        <frame pos="140 -{12 + $iterator->counter * 8}">
            <label pos="0 0" z-index="0" size="50 5" textsize="1.8" valign="center" text="{$mapQueueItem->map->Name}"/>
            <label pos="0 -3" z-index="0" size="50 5" textsize=".7" valign="center" textcolor="cccc" text="Requested by {$mapQueueItem->issuer->NickName}"/>
        </frame>
        {/foreach}
        {else}
        <label pos="140 -20" z-index="0" size="50 5" textsize="1.8" valign="center" text="No maps in queue"/>
        {/if}

        {for $i = 1; $i <= 0; $i++}
        <label pos="{$i * 6 - 4} -98" z-index="0" size="5 5" textsize="1.8" textcolor="{0 == $i ? '19FF' : 'EEEF'}" valign="center" halign="center" text="{$i}" action="ms.menu.showpage,{$i}"/>
        {/for}
    </frame>

    <script><!--
    main() {
        declare frame <=> (Page.MainFrame.GetFirstChild("main-frame") as CMlFrame);
        declare Real startScale = 0.85;
        declare Real curScale = startScale;
        declare Real targetScale = 0.81;

        while(curScale > targetScale){
            yield;
            curScale = curScale - 0.007;
            frame.Scale = curScale;
        }
    }
    --></script>
</frame>
</manialink>