<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<manialink id="{$id}" version="3">
    <frame pos="0 0" scale="{isset($showAnimation) && $showAnimation ? 1 : 0.95}" id="main-frame">
        <quad pos="-{$width/2} {$height/2}" z-index="-3" size="{$width} {$height}" bgcolor="0006"/>
        <quad pos="-{$width/2} {($height/2)-8}" z-index="0" size="{$width} 0.2" bgcolor="18f6"/>
        <quad pos="-{$width/2} {$height/2}" z-index="-2" size="{$width} 8" bgcolor="18f2"/>
        <quad pos="-{$width/2} {$height/2}" z-index="-1" size="{$width} {$height}" style="Bgs1" substyle="BgDialogBlur"/>
        <label pos="-{($width/2)-3} {$height/2-3}" z-index="1" size="{$width-6} 5" text="$s{$title ?? $id}" valign="top" textsize="1.6" textcolor="ffff" halign="left"/>
        <label pos="{($width/2)-3} {$height/2-3}" z-index="1" size="3 3" text="âœ–" valign="top" textsize="1.6" textcolor="fff9" halign="right" ScriptEvents="1"/>
        <frame pos="-{($width/2)-3} {($height/2)-11}">{$content|noescape}</frame>


        <script><!--
            Void close(CMlFrame frame){
                AnimMgr.Add(frame, "<frame scale='1.0' opacity='0.0' />", 100, CAnimManager::EAnimManagerEasing::QuintIn);
                sleep(100);
                frame.Hide();
                {if isset($onClose)}
                TriggerPageAction($onClose);
                {/if}
            }

            main() {
                declare frame <=> (Page.MainFrame.GetFirstChild("main-frame") as CMlFrame);

                {if isset($showAnimation) && $showAnimation}
                AnimMgr.Add(frame, "<frame scale='0.95' />", 300, CAnimManager::EAnimManagerEasing::QuintOut);
                {/if}

                while(True){
                    yield;
                    foreach(Event in PendingEvents) {
                        if(Event.Type == CMlScriptEvent::Type::MouseClick){
                            close(frame);
                        }
                    }
                }
            }
        --></script>

        {if isset($pagination)}
        <frame pos="-{$width/2 - 3} -{($height/2) - 4}" z-index="1" scale="0.75">
            {$pagination|noescape}
        </frame>
        {/if}
    </frame>
</manialink>